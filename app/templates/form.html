<!DOCTYPE html>
<html>
<head>
    <title>Create Invoice</title>
</head>
<body>
    <h1>Create Invoice</h1>
    <form id="invoice-form" action="/generate-pdf" method="post" enctype="multipart/form-data">
        <label>Client Name: <input type="text" name="client_name" required></label><br>
        <label>Invoice #: <input type="text" name="invoice_number" required></label><br>
        <label>Due Date: <input type="date" name="due_date" required></label><br>
        <label>Discount (â‚¦): <input type="number" step="0.01" name="discount" value="0.00"></label><br>
        <label>VAT (%): <input type="number" step="0.01" name="vat" value="0.00"></label><br>
        <label>Logo: <input type="file" name="logo" accept="image/*"></label><br><br>

        <div id="items">
            <div class="item">
                <label>Description: <input type="text" name="item_description" required></label>
                <label>Quantity: <input type="number" name="item_quantity" required></label>
                <label>Unit Price: <input type="number" step="0.01" name="item_unit_price" required></label>
            </div>
        </div>
        <button type="button" onclick="addItem()">Add Another Item</button><br><br>
        <button type="submit">Generate PDF</button>
    </form>
    <script>
        function addItem() {
            const itemHTML = `
                <div class="item">
                    <label>Description: <input type="text" name="item_description" required></label>
                    <label>Quantity: <input type="number" name="item_quantity" required></label>
                    <label>Unit Price: <input type="number" step="0.01" name="item_unit_price" required></label>
                </div>
            `;
            document.getElementById('items').insertAdjacentHTML('beforeend', itemHTML);
        }

        document.getElementById("invoice-form").addEventListener("submit", async (e) => {
  e.preventDefault();
  const formData = new FormData(e.target);
  const response = await fetch("/generate-pdf", {
    method: "POST",
    body: formData
  });
  const blob = await response.blob();
  const link = document.createElement("a");
  link.href = window.URL.createObjectURL(blob);
  link.download = "invoice.pdf";
  link.click();
});
    </script>
</body>
</html>